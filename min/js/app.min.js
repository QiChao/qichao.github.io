function createxmlHttp(){xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}function AjaxLQC(t){t=t||{},t.url=t.url||"",t.data=t.data||null,t.async=t.async||!0,t.success=t.success||function(){},"GET"===t.type&&(xmlhttp.open("get",t.url,t.async),xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlhttp.send(null)),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&t.success(xmlhttp.responseText)}}function getJsonPage(t){0==t?stateBox.homeState():1==t?stateBox.personalState():2==t?stateBox.workState():3==t&&stateBox.worksState()}function getNum(t){var e=parseFloat(t);return e}function css(t){var e;0==document.getElementsByTagName("style").length?(e=document.createElement("style"),e.innerText=t,document.body.appendChild(e)):(e=document.getElementsByTagName("style"),e[0].innerText=t)}function motion(t,e,n){return n?parseInt(t)-(e-parseInt(t))/30:parseInt(t)+(e-parseInt(t))/60}function AjaxLQC(t){t=t||{},t.url=t.url||"",t.data=t.data||null,t.async=t.async||!0,t.success=t.success||function(){},"GET"===t.type&&(xmlhttp.open("get",t.url,t.async),xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlhttp.send(null)),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&t.success(xmlhttp.responseText)}}function homeFun(win,doc){function HeadPortrait(t){var e=doc.createElement("div"),n=doc.createElement("div");n.className="ImgBox",e.style.backgroundImage="url("+t.src+")",e.className="homeImg",n.appendChild(e),contentBox.appendChild(n)}function homeIhp(t){for(var e=(new Date).getUTCFullYear(),n=0;n<t.length;n++){var o=doc.createElement("div");0==n?o.appendChild(doc.createTextNode(t[n]+(e-2015)+"年")):3==n?o.appendChild(doc.createTextNode(t[n]+(e-1993)+"岁")):o.appendChild(doc.createTextNode(t[n])),o.className="homeText",contentBox.appendChild(o)}}var contentBox=doc.getElementById("content_show");contentBox.innerHTML="";var obj={url:api+"/json/home.json",type:"GET",success:function(data){var Data=eval("("+data+")");HeadPortrait(Data.topImg),homeIhp(Data.brief)}};AjaxLQC(obj)}function presonalFun(t,e){var n=e.getElementById("content_show");n.innerHTML=""}function workFun(win,doc){function workDetails(t,e){for(var n=0;n<t.length;n++){this.index=n;var o=doc.createElement("div");for(x in e){var a,r=doc.createElement("div");if("Website"===x)a=doc.createTextNode(e[x]+" : "+t[n][x]+t[n].WebsitePrompt),r.appendChild(a);else if("WebsitePrompt"==x);else if("works"==x){for(var c=[],s=0;s<worklist.work[t[n].works].length;s++)c.push(worklist.work[t[n].works][s].name);a=doc.createTextNode("做过的项目 : "+c),r.id=t[n].works+"works",r.appendChild(a)}else a=doc.createTextNode(e[x]+" : "+t[n][x]),r.appendChild(a);o.appendChild(r)}workBox(o,t.length)}}function workBox(t,e){t.style.width="80vw",t.className="work",workBoxs.style.width=80*e+"vw",workBoxs.className="workBoxs",workBoxs.style.left=0,workBoxs.appendChild(t),contentBox.appendChild(workBoxs)}function animationFun(t,e){clearInterval(timer),timer=setInterval(function(){(e-t.offsetLeft)/10<1&&(e-t.offsetLeft)/10>-1?(t.style.left=e+"px",clearInterval(timer)):t.style.left=t.offsetLeft+(e-t.offsetLeft)/10+"px"},10)}function workLB(t,e){var n=doc.getElementsByClassName("work");0===Lunbo&&e===-1||Lunbo===n.length-1&&1===e||(Lunbo+=e,animationFun(t,-Lunbo*n[0].offsetWidth))}function controlLR(){var t=doc.createElement("div"),e=doc.createElement("div"),n=(doc.getElementsByClassName("bg_op")[0],doc.getElementsByClassName("workBoxs")[0]);t.innerHTML="<",e.innerHTML=">",t.className="controLeft LRbotton",e.className="controRight LRbotton",t.onclick=function(){workLB(n,-1)},e.onclick=function(){workLB(n,1)},contentBox.appendChild(t),contentBox.appendChild(e)}var contentBox=doc.getElementById("content_show");contentBox.innerHTML="";var worklist="1",workBoxs=doc.createElement("div"),timer,Lunbo=0,obj={url:api+"/json/work.json",type:"GET",success:function(data){var Data=eval("("+data+")");workDetails(Data.work,Data.Structure),controlLR()}},worklistobj={url:api+"/json/works.json",type:"GET",success:function(data){var Data=eval("("+data+")");worklist=Data,AjaxLQC(obj)}};AjaxLQC(worklistobj)}function worksFun(win,doc){function projectBox(t){contentBox.appendChild(t)}function Project(t){for(var e=doc.createElement("div"),n=0;n<t.length;n++){var o=doc.createElement("div");texts=doc.createTextNode(t[n].name+"go"+t[n].Time),o.appendChild(texts),o.className="Project",n%2==1?(o.style.top="50%",o.style.left=260*((n-1)/2)+"px"):(o.style.top="0%",o.style.left=260*(n/2)+"px"),o.id="Project"+n,e.appendChild(o),e.id="ProjectBox",projectBox(e)}}var contentBox=doc.getElementById("content_show");contentBox.innerHTML="";var worklistobj={url:api+"/json/works.json",type:"GET",success:function(data){var Data=eval("("+data+")");worklist=Data;var workArr=[];console.log(Data);for(x in Data.work)for(var i=0;i<Data.work[x].length;i++)workArr.push(Data.work[x][i]);Project(workArr)}};AjaxLQC(worklistobj)}var xmlhttp;createxmlHttp();var api=window.location.origin,stateBox={navState:function(){return stateBox.homeState(),!0},homeState:function(){homeFun(window,document)},personalState:function(){presonalFun(window,document)},workState:function(){workFun(window,document)},worksState:function(){worksFun(window,document)}};!function(win,doc,xmlhttp){function getY(t){for(var e=0;e<t.length;e++){var n=doc.createElement("span"),o=doc.createElement("a");o.appendChild(doc.createTextNode(t[e].name)),n.appendChild(o),n.index=e,Navs[0].appendChild(n)}for(var a=Navs[0].getElementsByTagName("span"),e=a.length-1;e>=0;e--)a[e].onclick=function(){for(var e=a.length-1;e>=0;e--)a[e].className="";contentText(this.index,t)};contentText(0,t)}function contentText(t,e){getJsonPage(t),Navs[0].getElementsByTagName("span")[t].className="state";var n=doc.getElementById("content"),o=doc.getElementById("bd_blur");css("#bd_blur::after{background-image:url(' "+e[t].image+" ')}"),n.style.backgroundImage="url("+e[t].image+")",o.style.backgroundImage="url("+e[t].image+")",navShowFun()}function navShowFun(){function t(){n.left=motion(getNum(n.left),120,!0)+"px",getNum(n.left)<=-120&&(n.left="-120px",clearInterval(o))}function e(){n.left=motion(getNum(n.left),120,!1)+"px",getNum(n.left)>=0&&(n.left="0px",clearInterval(o))}var n=Navs[0].style;if("0px"==n.left){doc.getElementById("navShowButton").innerHTML=">>";var o=setInterval(t,10)}else{doc.getElementById("navShowButton").innerHTML="<<";var o=setInterval(e,10)}}var Navs=doc.getElementsByTagName("nav");Navs[0].style.left="0px",doc.getElementById("navShowButton").addEventListener("click",navShowFun);var obj={url:api+"/json/json.json",type:"GET",success:function(data){var NavData=eval("("+data+")");getY(NavData),stateBox.navState()}};AjaxLQC(obj)}(window,document,xmlhttp);